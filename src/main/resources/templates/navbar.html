<html xmlns:sec="http://www.thymeleaf.org/extras/spring-security">


<div th:fragment="navbar">
	  <head>
		<meta charset="UTF-8">
		<title>Navbar</title>
		<link rel="stylesheet" href="/css/navbar.css" th:href="@{/css/navbar.css}">
		<script src="/js/navbar.js" th:src="@{/js/navbar.js}" type="text/javascript"></script>
	</head>
	
	<nav class="bg-gray-800">
	    <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
	      <div class="relative flex h-16 items-center justify-between">
	        <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
	           <!-- Mobile menu button -->
	          <button type="button" class="relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white" id="mobile-menu-button" aria-controls="mobile-menu" aria-expanded="false">
	            <span class="absolute -inset-0.5"></span>
	            <span class="sr-only">Open main menu</span>
<!-- 	            
	              Icon when menu is closed.
	  
	              Menu open: "hidden", Menu closed: "block" -->
	            
	            <svg class="block h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
	              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
	            </svg>
	            
	              <!-- Icon when menu is open.
	  
	              Menu open: "block", Menu closed: "hidden" -->
	        
	            <svg class="hidden h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
	              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
	            </svg>
	          </button>
	        </div>
		
	        <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">
	          <div class="flex flex-shrink-0 items-center">
	            <img class="h-8 w-auto" th:src="@{/img/logo_ticketwave.png}" alt="Your Company">
	          </div>
	          <div class="hidden sm:ml-6 sm:block">
	            <div class="flex space-x-4">
	              <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
	              <a th:href="@{/index}" th:classappend="${activePage == '@{/index}'} ? 'button-active' : 'button-inactive'" class="navbar-button block rounded-md px-3 py-2 text-base font-medium" >Accueil</a>
	             <div th:each="categorie : ${categories}">
			            <a th:href="@{/produit/{idCategorie}(idCategorie=${categorie.id})}" th:text="${categorie.name}" th:classappend="${activePage == '@{/produit/{idCategorie}(idCategorie=${categorie.id})}'} ? 'button-active' : 'button-inactive'" class="navbar-button block rounded-md px-3 py-2 text-base font-medium" ></a>
			      </div>


			      <!-- <a th:if="${isUserLoggedIn != null && isAdmin}" th:href="@{/addProduit}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >+ Produit</a>
			      <a th:if="${isUserLoggedIn != null && isAdmin}" th:href="@{/addCategorie}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >+ Categorie</a>
			      <a th:if="${isUserLoggedIn != null && isUserLoggedIn}" th:href="@{/logout}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >Déconnexion</a>
			      <a th:if="${isUserLoggedIn != null && isAdmin}" th:href="@{/categorie}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >All Categorie</a>
			      <a th:if="${isUserLoggedIn != null && isAdmin}" th:href="@{/produit}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >All Produit</a>
			      
				  <a th:if="${isUserLoggedIn == null}" th:href="@{/login}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >Connexion</a>
				  <a th:if="${isUserLoggedIn == null}" th:href="@{/register}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >S'inscrire</a> -->

	            </div>
	          </div>
	        </div>

				<div th:if="${isUserLoggedIn != null && isAdmin}" class="flex items-center justify-center p-12">
				  <div th:if="${isUserLoggedIn != null && isAdmin}" class=" relative inline-block text-left dropdown">
					<span th:if="${isUserLoggedIn != null && isAdmin}" class="rounded-md shadow-sm">
						<button th:if="${isUserLoggedIn != null && isAdmin}" class="admin-menu-button inline-flex justify-center w-full px-4 py-2 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-gray-800 border border-gray-300 rounded-md hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800" 
					   type="button" aria-haspopup="true" aria-expanded="true" aria-controls="headlessui-menu-items-117">
						<span th:if="${isUserLoggedIn != null && isAdmin}" >Options</span>
						<svg th:if="${isUserLoggedIn != null && isAdmin}" class="w-5 h-5 ml-2 -mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
						</button>
					</span>
					<div th:if="${isUserLoggedIn != null && isAdmin}" class="opacity-0 invisible dropdown-menu transition-all duration-300 transform origin-top-right -translate-y-2 scale-95" id="dropdown-menu">
					  <div th:if="${isUserLoggedIn != null && isAdmin}" class="absolute right-0 w-56 mt-2 origin-top-right bg-white border border-gray-200 divide-y divide-gray-100 rounded-md shadow-lg outline-none" aria-labelledby="headlessui-menu-button-1" id="headlessui-menu-items-117" role="menu">
						<div th:if="${isUserLoggedIn != null && isAdmin}" class="py-1">
						  <a th:if="${isUserLoggedIn != null && isAdmin}" th:href="@{/addProduit}" tabindex="0" class="text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left"  role="menuitem" >+ Produit</a>
						  <a th:if="${isUserLoggedIn != null && isUserLoggedIn}" th:href="@{/addCategorie}"  tabindex="1" class="text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left"  role="menuitem" >+ Catégorie</a>
						  <a th:if="${isUserLoggedIn != null && isAdmin}" th:href="@{/produit}" tabindex="2" class="text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left" role="menuitem" >All produit</a>
						  <a th:if="${isUserLoggedIn != null && isAdmin}" th:href="@{/categorie}" tabindex="3" class="text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left" role="menuitem" >All categorie</a>
						</div>
					  </div>
					</div>
				  </div>
				</div>
<!-- 
				<a th:if="${isUserLoggedIn != null && isUserLoggedIn}" th:href="@{/logout}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >Déconnexion</a>
				<a th:if="${isUserLoggedIn == null}" th:href="@{/login}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >Connexion</a>
				<a th:if="${isUserLoggedIn == null}" th:href="@{/register}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >S'inscrire</a> -->

	        <div id="search-container">
			    <input type="text" name="q" id="searchbar" placeholder="Rechercher un produit" />
			</div>


	        <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0">
	          <button type="button" class="relative rounded-full bg-gray-800 p-1 text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800">
	            <span class="absolute -inset-1.5"></span>
	            <span class="sr-only">View notifications</span>
	            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
	              <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" />
	            </svg>
	          </button>
	  
	          <!-- Profile dropdown -->
	          <div class="relative ml-3">
	            <div>
	              <button type="button" class="relative flex rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800" id="user-menu-button" aria-expanded="false" aria-haspopup="true">
	                <span class="absolute -inset-1.5"></span>
	                <span class="sr-only">Open user menu</span>
	                <img class="h-8 w-8 rounded-full" th:src="@{/img/pdpBase.png}" alt="">
	              </button>
	            </div>
	  
	            <!--
	              Dropdown menu, show/hide based on menu state.
	  
	              Entering: "transition ease-out duration-100"
	                From: "transform opacity-0 scale-95"
	                To: "transform opacity-100 scale-100"
	              Leaving: "transition ease-in duration-75"
	                From: "transform opacity-100 scale-100"
	                To: "transform opacity-0 scale-95"
	            -->
	            <div class="hidden absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none" id="user-menu" role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" tabindex="-1">
	              <!-- Active: "bg-gray-100", Not Active: "" -->
				  <a th:if="${isUserLoggedIn != null && isUserLoggedIn}" th:href="@{/logout}" class="block px-4 py-2 text-sm text-gray-700" role="menuitem" tabindex="0" id="user-menu-item-0">Déconnexion</a>
				  <a th:if="${isUserLoggedIn == null}" th:href="@{/login}" class="block px-4 py-2 text-sm text-gray-700" role="menuitem" tabindex="1" id="user-menu-item-1">Connexion</a>
				  <a th:if="${isUserLoggedIn == null}" th:href="@{/register}" class="block px-4 py-2 text-sm text-gray-700" role="menuitem" tabindex="2" id="user-menu-item-2">S'inscrire</a>
	            </div>
	          </div>
	        </div>
	      </div>
	    </div>
	  
	    <!-- Mobile menu, show/hide based on menu state. -->
	    <div class="hidden sm:hidden" id="mobile-menu">
	      <div class="space-y-1 px-2 pb-3 pt-2">
	        <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
			<div>
	        <a th:href="@{/index}" class="bg-gray-300 text-white block rounded-md px-3 py-2 text-base font-medium" aria-current="page">Accueil</a>
			</div>
			<div th:each="categorie : ${categories}">
	            <a th:href="@{/produit/{idCategorie}(idCategorie=${categorie.id})}" th:text="${categorie.name}" class="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium"></a>
	      	</div>
		  <!-- <a th:if="${isUserLoggedIn != null && isAdmin}" th:href="@{/addProduit}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >+ Produit</a>
			      <a th:if="${isUserLoggedIn != null && isAdmin}" th:href="@{/addCategorie}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >+ Categorie</a>
			      <a th:if="${isUserLoggedIn != null && isUserLoggedIn}" th:href="@{/logout}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >Déconnexion</a>
			      <a th:if="${isUserLoggedIn != null && isAdmin}" th:href="@{/categorie}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >All Categorie</a>
			      <a th:if="${isUserLoggedIn != null && isAdmin}" th:href="@{/produit}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >All Produit</a>
			       -->
				   <div th:if="${isUserLoggedIn != null && isAdmin}" class="flex items-center justify-center p-12">
					<div th:if="${isUserLoggedIn != null && isAdmin}" class=" relative inline-block text-left dropdown">
					  <span th:if="${isUserLoggedIn != null && isAdmin}" class="rounded-md shadow-sm">
						  <button th:if="${isUserLoggedIn != null && isAdmin}" class="admin-menu-button inline-flex justify-center w-full px-4 py-2 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-gray-800 border border-gray-300 rounded-md hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800" 
						 type="button" aria-haspopup="true" aria-expanded="true" aria-controls="headlessui-menu-items-117">
						  <span th:if="${isUserLoggedIn != null && isAdmin}" >Options</span>
						  <svg th:if="${isUserLoggedIn != null && isAdmin}" class="w-5 h-5 ml-2 -mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
						  </button>
					  </span>
					  <div th:if="${isUserLoggedIn != null && isAdmin}" class="opacity-0 invisible dropdown-menu transition-all duration-300 transform origin-top-right -translate-y-2 scale-95" id="dropdown-menu">
						<div th:if="${isUserLoggedIn != null && isAdmin}" class="absolute right-0 w-56 mt-2 origin-top-right bg-white border border-gray-200 divide-y divide-gray-100 rounded-md shadow-lg outline-none" aria-labelledby="headlessui-menu-button-1" id="headlessui-menu-items-117" role="menu">
						  <div th:if="${isUserLoggedIn != null && isAdmin}" class="py-1">
							<a th:if="${isUserLoggedIn != null && isAdmin}" th:href="@{/addProduit}" tabindex="0" class="text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left"  role="menuitem" >+ Produit</a>
							<a th:if="${isUserLoggedIn != null && isUserLoggedIn}" th:href="@{/addCategorie}"  tabindex="1" class="text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left"  role="menuitem" >+ Catégorie</a>
							<a th:if="${isUserLoggedIn != null && isAdmin}" th:href="@{/produit}" tabindex="2" class="text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left" role="menuitem" >All produit</a>
							<a th:if="${isUserLoggedIn != null && isAdmin}" th:href="@{/categorie}" tabindex="3" class="text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left" role="menuitem" >All categorie</a>
						  </div>
						</div>
					  </div>
					</div>
				  </div>

				  <a th:if="${isUserLoggedIn == null}" th:href="@{/login}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >Connexion</a>
				  <a th:if="${isUserLoggedIn == null}" th:href="@{/register}" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" >S'inscrire</a>

	    </div>
	    
				
				
			
	  </nav>
	  <ol id='list' style="display: none;">
		    <li th:each="produit : ${produits}" class="produits" th:text="${produit.name}" th:attr="data-id=${produit.id}"></li>
	  </ol>
	  


</div>

